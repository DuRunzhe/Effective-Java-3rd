# 谨慎设计方法签名

本章是API设计方法的汇总，这当中每个方法都不值得单独列出。放在一起学习，它们将使你的API更容易学习和使用，并且更不容易出错。

**谨慎选择方法名称**。名称应始终遵循标准的命名约定（条款68）。你的主要目标应该是选择容易理解的并且与同一包下的其他名称一致的名称。你的第二个目标应该是选择与更广泛的共识相一致的名字。避免长方法名。如果有疑问，可以参考Java库的API。尽管存在大量的矛盾——考虑到这些库的规模和范围，这是不可避免的——但也存在相当多的共识。

**不要过分提供便捷的方法**。每一个方法都应该各司其职。太多的方法使得类难以学习、使用、记录、测试和维护。对于接口来说更是如此，在接口中，太多的方法会使接口的实现者和使用者的生活变得复杂。对于类或接口支持的每个操作，都应该充分地提供一个功能方法。且仅仅当这个操作被经常使用时，才要考虑提供一个速记法。**如果不确定，就不要这样做**。

**避免长参数列表**。目标是4个参数或者更少。因为大对数程序员无法记住更长的参数列表了。如果你的方法大多数都超过这个限制，而且还没有文档记录这些参数，那么你的API将不可用。虽然有先进的IDE的帮助，但是使用简短的参数列表仍然会让你的状况变得更好。长序列的相同类型的参数尤其有害。使用者不仅无法记住这些参数的顺序，而且当他们不小心将参数调换了顺序，他们的程序依然可以编译并运行。结果代码没有按作者意图的去执行。

这里有3种技术可以缩短过长的参数列表。一种方法是将该方法分解成多个方法，然后每个方法只需要之前参数的一个子集。如果不小心操作，这可能导致太多的方法，但它也可以通过增加正交性来帮助减少方法数量。比如，考虑一下`java.util.List`接口。它不提供查找子列表中元素的第一个或最后一个索引的方法，这两个方法都需要三个参数。取而代之的是，它提供了`subList`方法，该方法接受两个参数并返回一个子列表的视图。此方法可以与`indexOf`或`lastIndexOf`方法组合使用，这其中每个方法都有一个参数，最后生成我们所需的功能。此外，`subList`方法可以与操作列表实例的任何方法组合使用，以完成对子列表的任意计算。最后得到的API具有很高的性价比。